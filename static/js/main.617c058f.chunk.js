(this["webpackJsonpreact-redux-starwars-datatable-filters"]=this["webpackJsonpreact-redux-starwars-datatable-filters"]||[]).push([[0],{18:function(e,t,n){e.exports=n(32)},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),u=n.n(a),l=n(10),c=n.n(l),i=(n(29),n(30),Object(r.b)(null,(function(e){return{filtredName:function(t){return e({type:"NAMEFILTER",name:t})}}}))((function(e){var t=e.filtredName;return u.a.createElement("input",{type:"text",onChange:function(e){var n=e.target.value;t(n)}})}))),o=n(5),s=n(7),m=n(6),f=n(9),p=n(3),b=n(8),d=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(s.a)(this,Object(m.a)(t).call(this,e))).state={column:"",comparison:"",value:""},n.selectAndInput=n.selectAndInput.bind(Object(f.a)(n)),n.select=n.select.bind(Object(f.a)(n)),n}return Object(b.a)(t,e),Object(p.a)(t,null,[{key:"buttonExclude",value:function(e,t){return""!==e[0].numericValues.column?e.map((function(e){var n=e.numericValues;return u.a.createElement("div",{key:n.column},u.a.createElement("p",null,"".concat(n.column," ").concat(n.comparison," ").concat(n.value)),u.a.createElement("button",{value:n.column,onClick:function(e){var n=e.target;return t(n.value)},type:"button"},"Exclude"))})):null}}]),Object(p.a)(t,[{key:"select",value:function(e){var t=this,n=this.state.column;return u.a.createElement("select",{value:n,onChange:function(e){var n=e.target.value;return t.setState({column:n})}},u.a.createElement("option",null,null),e.map((function(e){return u.a.createElement("option",{key:e,value:e},e)})))}},{key:"selectAndInput",value:function(){var e=this,t=this.state,n=t.column,r=t.comparison,a=t.value;return u.a.createElement("div",null,u.a.createElement("select",{value:r,disabled:!n,onChange:function(t){var n=t.target.value;return e.setState({comparison:n})}},u.a.createElement("option",null,null),u.a.createElement("option",{value:"Maior que"},"Maior que"),u.a.createElement("option",{value:"Menor que"},"Menor que"),u.a.createElement("option",{value:"Igual a"},"Igual a")),u.a.createElement("input",{value:a,disabled:!r,onChange:function(t){var n=t.target.value;return e.setState({value:n})},type:"number"}))}},{key:"render",value:function(){var e=this,n=this.props,r=n.filtred,a=n.filters,l=n.arrayFilter,c=n.exclude,i=this.state,o=i.comparison,s=i.column,m=i.value;return u.a.createElement("div",null,this.select(l),this.selectAndInput(),u.a.createElement("button",{onClick:function(){m&&(r(e.state,l.filter((function(e){return e!==s}))),e.setState({column:"",comparison:"",value:""}))},type:"button",disabled:!o},"Filter"),t.buttonExclude(a,c))}}]),t}(u.a.Component),v=Object(r.b)((function(e){var t=e.filter;return{filters:t.filters,arrayFilter:t.arrayFilter}}),(function(e){return{filtred:function(t,n){return e({type:"FilterNumber",obj:t,arrayFilter:n})},exclude:function(t){return e({type:"EXCLUDE",value:t})}}}))(d),E=function(){return fetch("https://cors-anywhere.herokuapp.com/https://swapi-trybe.herokuapp.com/api/planets").then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))};var h=function(e){var t=e.planet;return Object.keys(t).map((function(e){return"residents"!==e?u.a.createElement("td",{key:Object.values(t[e])},Object.values(t[e])):null}))},y=(n(31),function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return u.a.createElement("h1",{className:"loading"},"Carregando...")}}]),t}(a.Component));var j=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.getPlanets)()}},{key:"render",value:function(){var e=this.props,t=e.api,n=t.data,r=t.filters,a=t.loading,l=e.filter.filters,c=e.Sort,i=n;return a?u.a.createElement(y,null):(l[0]&&l.forEach((function(e){i=function(e,t,n){var r=e.numericValues.value;return"Menor que"===e.numericValues.comparison?t.filter((function(t){return Number(t[e.numericValues.column])<Number(r)&&t.name.match(new RegExp(n[0].name,"i"))})):"Maior que"===e.numericValues.comparison?t.filter((function(t){return Number(t[e.numericValues.column])>Number(r)&&t.name.match(new RegExp(n[0].name,"i"))})):"Igual a"===e.numericValues.comparison?t.filter((function(t){return Number(t[e.numericValues.column])===Number(r)&&t.name.match(new RegExp(n[0].name,"i"))})):t}(e,i,r)})),r[0].name&&(i=i.filter((function(e){return e.name.match(new RegExp(r[0].name,"i"))}))),u.a.createElement("table",{border:"1px"},u.a.createElement("caption",null,"STAR WARS PLANETS"),u.a.createElement("thead",null,u.a.createElement("tr",null,function(e,t){return e[0]?Object.keys(e[0]).map((function(e){return"residents"!==e?u.a.createElement("td",{key:e},u.a.createElement("button",{className:"buttonTd",type:"button",onClick:function(){return t(e)}},e)):null})):null}(n,c))),u.a.createElement("tbody",null,i.map((function(e){return u.a.createElement("tr",{key:e.name},u.a.createElement(h,{planet:e}))})))))}}]),t}(u.a.Component),O=Object(r.b)((function(e){return{api:e.api,filter:e.filter}}),(function(e){return{getPlanets:function(){return e((function(e){return E().then((function(t){return e({type:"SUCCESS",results:t.results})}),(function(t){return e(function(e){return{type:"FAILURE",error:e}}(t.message))}))}))},Sort:function(t){return e({type:"SORT",value:t})}}}))(j);var g=function(){return u.a.createElement("div",{className:"App"},u.a.createElement(i,null),u.a.createElement(v,null),u.a.createElement(O,null))},C=n(2),S=n(17),k=n(4),N={data:[],error:"",loading:!0,filters:[{column:"name",order:"ASC",name:""}]};function F(e,t,n){var r=["rotation_period","orbital_period","diameter","surface_water","population","created","edited"];return"ASC"===e[0].order&&r.some((function(e){return e===n}))?t.sort((function(e,t){return Number(e[n])>Number(t[n])?1:-1})):"DESC"===e[0].order&&r.some((function(e){return e===n}))?t.sort((function(e,t){return Number(e[n])<Number(t[n])?1:-1})):function(e,t,n){return"ASC"===e.order?t.sort((function(e,t){return e[n]>t[n]?1:-1})):t.sort((function(e,t){return e[n]<t[n]?1:-1}))}(e[0],t,n)}var A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SUCCESS":return Object(k.a)({},e,{data:F(e.filters,t.results,"name"),filters:[Object(k.a)({},e.filters[0],{order:"DESC"})],loading:!1});case"FAILURE":return{error:t.error};case"NAMEFILTER":return Object(k.a)({},e,{filters:[{name:t.name}]});case"SORT":var n=F(e.filters,e.data,t.value),r=e.filters[0];return r.order="ASC"===e.filters[0].order?"DESC":"ASC",r.column=t.value,Object(k.a)({},e,{data:n,filters:[r]});default:return e}},w=n(14),x={arrayFilter:["population","orbital_period","diameter","rotation_period","surface_water"],filters:[{numericValues:{column:"",comparison:"",value:""}}]};function V(e){return{numericValues:{column:e.column,comparison:e.comparison,value:e.value}}}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FilterNumber":return""===e.filters[0].numericValues.column?{arrayFilter:t.arrayFilter,filters:[V(t.obj)]}:{arrayFilter:t.arrayFilter,filters:[].concat(Object(w.a)(e.filters),[V(t.obj)])};case"EXCLUDE":var n=e.filters.filter((function(e){return e.numericValues.column!==t.value})),r=[].concat(Object(w.a)(e.arrayFilter),[t.value]);return Object(k.a)({},e,{filters:0===n.length?x.filters:n,arrayFilter:r});default:return e}},R=Object(C.c)({api:A,filter:I}),M=Object(C.d)(R,Object(C.a)(S.a));c.a.render(u.a.createElement(r.a,{store:M},u.a.createElement(g,null)),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.617c058f.chunk.js.map